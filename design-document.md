# Webアプリ仕様書

## 1. 概要

ユーザーが日々の料理レシピを記録・管理できるWebアプリ。
ユーザーは、料理名、材料、作り方を入力してレシピを保存できる。
また、保存されたレシピはキーワードで検索可能。
さらに、入力した材料をもとにAIが新しいレシピを提案する機能も備えている。

## 2. 主な機能

### 2.1 レシピ管理機能
- レシピの保存：料理名、材料、作り方をフォームに入力し、データベース(JSONファイル)に保存できる。各レシピには一意のIDがつく。
- レシピの閲覧：保存されているすべてのレシピを一覧で表示する。
- レシピの検索：料理名や材料、作り方などのキーワードを入力して、保存済みのレシピを検索し、フィルタリングされた結果を表示する。
- レシピの削除：不要になったレシピは、一意のIDを指定して削除できる。
### 2.2 生成AIリクエスト API
ユーザーは入力した材料に基づいて、AIに新しいレシピを生成させることができる。
- プロンプトの生成：ユーザーが入力した材料を基に、AIに渡すためのプロンプトを動的に生成する。
- AIモデルの利用：OpenAIのgpt-3.5-turboモデルを使用し、OpenRouter API経由でレシピをリクエストする。
- JSON形式での出力：AIへのリクエストは料理名、材料、作り方を含むJSON形式での出力を強制するように設定されている。
- エラーハンドリング：APIキーが設定されていない場合や、リクエストが多すぎる場合や、その他の通信エラーが発生した場合に対応するエラーメッセージが表示される。


## 3. 使用技術

| 分類         | 技術・ライブラリ |
|--------------|------------------|
| フロントエンド | Vue.js / HTML5 + CSS3 |
| バックエンド  | Flask |
| 通信方式     | Fetch API / JSON |
| LLMモデル    | OpenRouter API（OpenAI, Anthropic, Mistral等） |

## 4. APIエンドポイント
エンドポイント             / メソッド / 説明
/                         / GET     / クライアントサイドのWebアプリケーション(index.html)をホスト
/api/resipes              / GET     / すべてのレシピの取得。keywordクエリパラメータを使用し、指定したキーワードでレシピをフィルタリング。
/api/resipes              / POST    / 新しいレシピをJSONデータとして受け取り、保存。
/api/recipes/<recipe_id>  / DELETE  / 指定されたIDのレシピを削除
/api/generate-recipe      / POST    / ユーザが入力した材料からAIにレシピ生成させる。

